"use strict";(()=>{var e={};e.id=414,e.ids=[414],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6478:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>b,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>l});var o={};t.r(o),t.d(o,{GET:()=>d});var a=t(9303),s=t(8716),n=t(670),i=t(7070);async function d(){let{data:e,error:r}=await Object(function(){var e=Error("Cannot find module '@/lib/supabaseServer'");throw e.code="MODULE_NOT_FOUND",e}()).from("user_stats").select("fid, total_points, users(username, is_og)").order("total_points",{ascending:!1}).limit(100);if(r)return console.error("leaderboard error",r),i.NextResponse.json({error:"Failed to load leaderboard"},{status:500});let t=(e||[]).map((e,r)=>({rank:r+1,fid:e.fid,totalPoints:e.total_points,username:e.users?.username??`fid:${e.fid}`,isOg:e.users?.is_og??!1}));return i.NextResponse.json({leaderboard:t})}!function(){var e=Error("Cannot find module '@/lib/supabaseServer'");throw e.code="MODULE_NOT_FOUND",e}();let u=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/leaderboard/route",pathname:"/api/leaderboard",filename:"route",bundlePath:"app/api/leaderboard/route"},resolvedPagePath:"/workspaces/bbox/src/app/api/leaderboard/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:c}=u,m="/api/leaderboard/route";function b(){return(0,n.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:l})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(6478));module.exports=o})();